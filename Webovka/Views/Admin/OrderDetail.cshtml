@model Webovka.Models.Order
@{
    ViewData["Title"] = "Detail objednávky";
}

<div class="container" style="padding-top: 50px; padding-bottom: 50px;">

    <div class="admin-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <div>
            <h1 style="margin: 0;">Objednávka #@Model.Id</h1>
            <p style="color:#777; margin: 5px 0 0 0;">Detail zákazníka a položek</p>
        </div>
        <a asp-action="Orders" class="btn-red" style="background-color: #7f8c8d; text-decoration:none;">← Zpět na objednávky</a>
    </div>

    <div style="display: flex; gap: 40px; flex-wrap: wrap;">

        <div style="flex: 1; min-width: 300px; background: #f9f9f9; padding: 20px; border-radius: 8px;">
            <h3 style="margin-top:0;">Zákazník</h3>
            <p><strong>Jméno:</strong> @Model.CustomerName</p>
            <p><strong>Email:</strong> @Model.CustomerEmail</p>
            <p><strong>Telefon:</strong> @Model.CustomerPhone</p>
            <p><strong>Adresa:</strong><br>@Model.CustomerAddress</p>
            <hr>
            <p><strong>Datum:</strong> @Model.OrderDate</p>
            <p><strong>Stav:</strong> <span style="color:green; font-weight:bold;">@Model.State</span></p>
        </div>

        <div style="flex: 2; min-width: 300px;">
            <h3 style="margin-top:0;">Zakoupené položky</h3>
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>Produkt</th>
                        <th>Varianta</th>
                        <th>Ks</th>
                        <th>Cena/ks</th>
                        <th>Celkem</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.OrderItems)
                    {
                        <tr>
                            <td>
                                <img src="@item.ProductVariant?.Product?.MainImageUrl" width="40" style="vertical-align:middle; border-radius:4px;">
                                @(item.ProductVariant?.Product?.Name ?? "Neznámý produkt")
                            </td>
                            <td>
                                @(item.ProductVariant?.Color ?? "-"), @(item.ProductVariant?.Size ?? "-")
                            </td>
                            <td>@item.Quantity</td>
                            <td>@item.UnitPrice Kč</td>
                            <td>@(item.Quantity* item.UnitPrice) Kč</td>
                        </tr>
                    }
                </tbody>
            </table>

            <div style="text-align: right; margin-top: 20px; font-size: 1.5rem; font-weight: bold; color: #d93025;">
                Celkem: @Model.TotalPrice Kč
            </div>
        </div>
    </div>
</div>