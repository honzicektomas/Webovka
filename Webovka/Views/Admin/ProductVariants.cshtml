@model Webovka.Models.Product
@{
    ViewData["Title"] = "Varianty produktu";
}

<div class="container" style="padding-top: 50px; padding-bottom: 50px;">

    <div class="admin-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <div>
            <h1 style="margin: 0;">Varianty: @Model.Name</h1>
            <p style="color:#777; margin: 5px 0 0 0;">Přidejte barvy a velikosti</p>
        </div>
        <a asp-action="Products" class="btn-red" style="background-color: #7f8c8d; text-decoration:none;">← Zpět na seznam</a>
    </div>

    <div class="variant-form" style="background: #f9f9f9; padding: 20px; border-radius: 8px; border: 1px solid #eee; margin-bottom: 30px;">
        <form asp-action="AddVariant" method="post" style="display:flex; gap:15px; width:100%; align-items:flex-end;">
            <input type="hidden" name="productId" value="@Model.Id" />

            <div style="flex:1;">
                <label class="form-label" style="font-weight:bold;">Název barvy</label>
                <input type="text" name="color" class="form-input" required placeholder="Např. Modrá" style="width:100%; padding:8px; border:1px solid #ccc;">
            </div>

            <div style="width: 80px;">
                <label class="form-label" style="font-weight:bold;">Odstín</label>
                <input type="color" name="colorHex" value="#000000" style="width:100%; height:38px; cursor:pointer; padding:0; border:1px solid #ccc;">
            </div>

            <div style="flex:1;">
                <label class="form-label" style="font-weight:bold;">Velikost</label>
                <input type="text" name="size" class="form-input" required placeholder="Např. 38" style="width:100%; padding:8px; border:1px solid #ccc;">
            </div>

            <div style="width: 100px;">
                <label class="form-label" style="font-weight:bold;">Skladem</label>
                <input type="number" name="stock" class="form-input" value="1" required style="width:100%; padding:8px; border:1px solid #ccc;">
            </div>

            <button type="submit" class="btn-red">Přidat</button>
        </form>
    </div>

    <table class="admin-table" style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="background:#eee; border-bottom:2px solid #ddd;">
                <th style="padding:10px;">Barva</th>
                <th style="padding:10px;">Velikost</th>
                <th style="padding:10px;">Skladem (ks)</th>
                <th style="padding:10px; text-align:right;">Akce</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Variants != null)
            {
                foreach (var v in Model.Variants)
                {
                    <tr style="border-bottom:1px solid #eee;">
                        <td style="padding:10px; vertical-align: middle;">
                            <span style="display:inline-block; width:20px; height:20px; background-color:@v.ColorHex; border:1px solid #ccc; margin-right:8px; vertical-align:middle; border-radius:50%;"></span>
                            @v.Color
                        </td>
                        <td style="padding:10px; vertical-align: middle;">@v.Size</td>

                        <td style="padding:10px; vertical-align: middle;">
                            <form asp-action="UpdateVariantStock" method="post" style="display:flex; align-items:center; gap:5px;">
                                <input type="hidden" name="variantId" value="@v.Id" />
                                <input type="number" name="newStock" value="@v.StockQuantity" style="width: 60px; padding: 5px; border: 1px solid #ddd; border-radius: 4px; text-align: center;">
                                <button type="submit" style="background: none; border: none; color: #27ae60; cursor: pointer; font-weight: bold; font-size:1.2rem;" title="Uložit">✔</button>
                            </form>
                        </td>

                        <td style="padding:10px; text-align:right; vertical-align: middle;">
                            <a asp-action="DeleteVariant" asp-route-id="@v.Id" onclick="return confirm('Opravdu smazat?')" style="color: #d93025; font-weight: bold; text-decoration: none;">✕ Smazat</a>
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>